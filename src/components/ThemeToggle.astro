<button 
  id="theme-toggle" 
  class="p-2 rounded-lg bg-black/5 hover:bg-black/10 dark:bg-white/10 dark:hover:bg-white/20 transition-all cursor-pointer text-xl"
>
  <span id="theme-icon">ðŸŒ™</span>
</button>

<script is:inline>
  // On rÃ©cupÃ¨re les Ã©lÃ©ments
  const btn = document.getElementById('theme-toggle');
  const icon = document.getElementById('theme-icon');
  const html = document.documentElement;

  // Fonction simple pour mettre Ã  jour l'icÃ´ne visuellement
  const updateIcon = (isDark) => {
    icon.innerText = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
  };

  // 1. Au chargement : on vÃ©rifie ce qui est enregistrÃ©
  const savedTheme = localStorage.getItem('theme') || 
                    (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

  // Appliquer le thÃ¨me initial
  if (savedTheme === 'dark') {
    html.classList.add('dark');
    updateIcon(true);
  } else {
    html.classList.remove('dark');
    updateIcon(false);
  }

  // 2. Au clic : on bascule tout
  btn.addEventListener('click', () => {
    const isNowDark = html.classList.toggle('dark'); // Ajoute ou enlÃ¨ve .dark
    
    // Mettre Ã  jour l'icÃ´ne
    updateIcon(isNowDark);
    
    // Sauvegarder le choix
    localStorage.setItem('theme', isNowDark ? 'dark' : 'light');
  });
</script>