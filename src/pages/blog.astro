---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
---

<Layout title="Blog">
	<main>
		<h1>My Blog</h1>
		<ul>
            {posts.map((post) => (
                <li>
                    <a href={`/blog/${post.slug}`}>
                        {post.data.title}
                    </a>
                    <time datetime={post.data.pubDate.toISOString()}>
                        {new Date(post.data.pubDate).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                        })}
                    </time>
                </li>
            ))}
        </ul>
	</main>
</Layout>